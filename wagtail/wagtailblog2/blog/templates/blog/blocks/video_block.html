{% load wagtailimages_tags %}

<div class="video-block">
    {% if value.video_type == 'upload' and value.uploaded_video_path %}
        <video width="100%" controls
            {% if value.autoplay %}autoplay{% endif %}
            {% if value.loop %}loop{% endif %}
            {% if value.muted %}muted{% endif %}>
            <source src="{{ value.uploaded_video_path }}" type="video/mp4">
            您的浏览器不支持视频标签。
        </video>
    {% elif value.video_type == 'youtube' and value.external_video_url %}
        <iframe width="100%" height="400" src="{{ value.external_video_url|youtube_embed_url }}" frameborder="0" allowfullscreen></iframe>
    {% elif value.video_type == 'bilibili' and value.external_video_url %}
        <iframe width="100%" height="400" src="{{ value.external_video_url|bilibili_embed_url }}" frameborder="0" allowfullscreen></iframe>
    {% elif value.video_type == 'vimeo' and value.external_video_url %}
        <iframe width="100%" height="400" src="{{ value.external_video_url|vimeo_embed_url }}" frameborder="0" allowfullscreen></iframe>
    {% endif %}

    {% if value.thumbnail %}
        <div class="video-thumbnail">
            {% image value.thumbnail fill-800x450 %}
        </div>
    {% endif %}
</div>