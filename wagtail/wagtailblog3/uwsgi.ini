[uwsgi]
# 项目目录
chdir=/home/source/Django/wagtail/wagtailblog3

# WSGI模块
module=wagtailblog3.wsgi:application

# 虚拟环境路径
home=/root/anaconda3/envs/wagtailblog

# Django设置模块
env=DJANGO_SETTINGS_MODULE=wagtailblog3.settings.dev
env=DJANGO_LOG_LEVEL=WARNING

# 启用主进程
master=true

# 缓冲区大小 - 增大以处理更大的请求
buffer-size=65536

# PID文件
pidfile=uwsgi.pid

# 后台运行并记录日志
daemonize=logs/uwsgi.log

# 临时使用 HTTP 模式进行调试
 http=0.0.0.0:6051

# 使用socket模式与nginx通信
socket=/home/source/Django/wagtail/wagtailblog3/wagtailblog3.sock
chmod-socket=666
vacuum=true

# 工作进程数
processes=2
threads=2

# 请求超时时间
harakiri=60

# 最大请求数后重启worker
max-requests=5000

# 优雅关闭
die-on-term=true

# 启用详细日志
log-date=true
log-maxsize=100000000

# 添加以下配置确保请求头完整传递
ignore-sigpipe=true
ignore-write-errors=true
disable-write-exception=true
